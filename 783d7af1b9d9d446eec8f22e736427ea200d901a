{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "9280c968_19d95ddc",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/CredentialsProvider.java",
        "patchSetId": 6
      },
      "lineNbr": 25,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "Do we need this to be public?",
      "range": {
        "startLine": 25,
        "startChar": 0,
        "endLine": 25,
        "endChar": 6
      },
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d054bd06_6ab6a300",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/Module.java",
        "patchSetId": 6
      },
      "lineNbr": 36,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "nit: extra empty line",
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b4b905ae_77a40e69",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubApiModule.java",
        "patchSetId": 6
      },
      "lineNbr": 41,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "Can you comment on why this is an optional injection?",
      "range": {
        "startLine": 41,
        "startChar": 10,
        "endLine": 41,
        "endChar": 25
      },
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6b86fd2_539324a5",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubApiModule.java",
        "patchSetId": 6
      },
      "lineNbr": 53,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "It isn\u0027t a good practice to have business logic during the Guice module configure. Why not simply create a Provider\u003cScheduledExecutorService\u003e instead?",
      "range": {
        "startLine": 52,
        "startChar": 9,
        "endLine": 53,
        "endChar": 94
      },
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "aa1710b3_20aba9e2",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubBrokerApi.java",
        "patchSetId": 6
      },
      "lineNbr": 29,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "Does this need to be public?",
      "range": {
        "startLine": 29,
        "startChar": 0,
        "endLine": 29,
        "endChar": 6
      },
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f5fac583_a1f4c43e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubBrokerApi.java",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "Why not using a thread-safe collection here? \n\nExample:\n\n  Collections.newSetFromMap(new ConcurrentHashMap\u003c\u003e())",
      "range": {
        "startLine": 33,
        "startChar": 10,
        "endLine": 33,
        "endChar": 49
      },
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3ad97c3e_85bc9c27",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubBrokerApi.java",
        "patchSetId": 6
      },
      "lineNbr": 45,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "Cool idea, well done !",
      "range": {
        "startLine": 45,
        "startChar": 11,
        "endLine": 45,
        "endChar": 78
      },
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "99b04e74_3e8ec599",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubBrokerApi.java",
        "patchSetId": 6
      },
      "lineNbr": 51,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "No need to synchronise if we have a thread-safe collection",
      "range": {
        "startLine": 51,
        "startChar": 4,
        "endLine": 51,
        "endChar": 30
      },
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f74e2eb8_84ad7505",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubBrokerApi.java",
        "patchSetId": 6
      },
      "lineNbr": 74,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "Should this to be logged instead?",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 74,
        "endChar": 36
      },
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e8b2d565_df9f9b8e",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubBrokerApi.java",
        "patchSetId": 6
      },
      "lineNbr": 86,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "Maybe throw an exception in the meantime?",
      "range": {
        "startLine": 86,
        "startChar": 4,
        "endLine": 86,
        "endChar": 21
      },
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e157f89b_6557ae59",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PubSubEventSubscriber.java",
        "patchSetId": 6
      },
      "lineNbr": 69,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "Why not logging it in the meantime?",
      "range": {
        "startLine": 68,
        "startChar": 0,
        "endLine": 69,
        "endChar": 26
      },
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "04aac44d_38f241c2",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PublisherProvider.java",
        "patchSetId": 6
      },
      "lineNbr": 24,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "Does this need to be public?",
      "range": {
        "startLine": 24,
        "startChar": 0,
        "endLine": 24,
        "endChar": 6
      },
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "670e7be2_ce44c209",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/pubsub/PublisherProvider.java",
        "patchSetId": 6
      },
      "lineNbr": 33,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "This looks like more a factory pattern: have you thought about defining a Publisher Factory instead? You could use the assisted injects and the Guice Factory pattern.",
      "range": {
        "startLine": 33,
        "startChar": 9,
        "endLine": 33,
        "endChar": 36
      },
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a87977a0_d50f180f",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/pubsub/PubSubBrokerApiIT.java",
        "patchSetId": 6
      },
      "lineNbr": 111,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "This is testing the wrong thing: we would like to check that the GCloud PubSub works, not that Gson works. We don\u0027t want this test to break for the wrong reason.\n\nWhat about injecting a Gson object and just doing:\n      String expectedMessageJson \u003d gson.toJson(eventMessage);",
      "range": {
        "startLine": 109,
        "startChar": 0,
        "endLine": 111,
        "endChar": 42
      },
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f93af853_f0aeb6a6",
        "filename": "src/test/java/com/googlesource/gerrit/plugins/pubsub/PubSubBrokerApiIT.java",
        "patchSetId": 6
      },
      "lineNbr": 125,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2021-03-18T15:15:38Z",
      "side": 1,
      "message": "This is reading only 1 message (see L134): should be called \u0027readMessageAndValidate\u0027?",
      "range": {
        "startLine": 125,
        "startChar": 15,
        "endLine": 125,
        "endChar": 37
      },
      "revId": "783d7af1b9d9d446eec8f22e736427ea200d901a",
      "serverId": "d5d70762-12d0-45a1-890d-524b12d3f735"
    }
  ]
}